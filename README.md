# Estore
This is a checkout system managed by a set of RESTful endpoints. 
Current functions include product management for admin and shopping cart for customer.

User account management is assumed to be done by a separate system, so sample users are
configured in SecurityConfig.java.

The discount rules are configured in the discounts list in Product and will be applied according to the order in the list. The discount rules are per product based.

## Prerequisites 
* Java17

## Run and Test
The following guides illustrate how run and test the app:

* To start the app
```
./mvnw spring-boot:run
```
or
```
./mvnw package && cd target && java -jar estore-0.0.1-SNAPSHOT.jar
```

* To run the test
```
./mvnw test
```

* To read the code coverage report
```
./mvnw verify && open ./target/site/jacoco/index.html
```

## Openapi
The openapi file for this app can be found in the link below:
- [openapi.yaml](https://github.com/developerkw/estore/blob/main/src/main/resources/openapi/openapi.yaml)

## REST API specification
The detailed REST API specification can be found by opening the [openapi.yaml](https://github.com/developerkw/estore/blob/main/src/main/resources/openapi/openapi.yaml) in [Swagger editor](https://editor.swagger.io/).

Path | Method   | Action                                  | Response              
-----|----------|-----------------------------------------|-----------------------
`/product`| `POST`   | Add a new product to the store          | Product being created 
`/product`| `PUT`    | Update an existing product in the store | N/A
`/product/{productId}`| `GET`    | Find product by ID                      | A Product
`/product/{productId}`| `DELETE` | Delete a product from the store         | N/A
`/basket` | `POST`   | Add a product to basket                 | Item being added
`/basket` | `GET`    | Find basket items by user name               | List of items in basket
`/basket/{id}` | `DELETE`   | Deletes a basket item by id                | N/A
`/basket/checkout` | `GET`    | Generate receipt according to items in basket                | Receipt


## Improvements
* Fix the Swagger UI
* Update to use the api interfaces and models generated by the openapi.
* Convert to use reactive.

